
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>20. Internacionalización &#8212; documentación de gvSIG Docs - 1.0.0</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../_static/gvSIG.ico"/>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="21. Explorers" href="explorers.html" />
    <link rel="prev" title="19. Lenguaje R" href="rscript.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="explorers.html" title="21. Explorers"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="rscript.html" title="19. Lenguaje R"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de gvSIG Docs - 1.0.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Documentación de Scripting en gvSIG 2.4</a> &#187;</li>

<div align="right">
<li>
<a href="http://downloads.gvsig.org/download/web/es/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_ES.png"></a></li>
<a href="http://downloads.gvsig.org/download/web/en/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_EN.png"></a></li>
<a href="http://downloads.gvsig.org/download/web/pt_br/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_BR.png"></a></li>
</div>

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="internacionalizacion">
<h1>20. Internacionalización<a class="headerlink" href="#internacionalizacion" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="traducciones">
<h2>20.1. Traducciones<a class="headerlink" href="#traducciones" title="Enlazar permanentemente con este título">¶</a></h2>
<p>gvSIG cuenta con su gestor de traducciones. Para hacer uso de él necesitaremos que nuestro script haga una serie de pasos.</p>
</div>
<div class="section" id="ficheros-de-traduccion">
<h2>20.2. Ficheros de traducción<a class="headerlink" href="#ficheros-de-traduccion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Estas traducciones son una serie de cadenas con su equivalente en diferentes idiomas. Por lo general dentro del plugin se creará una carpeta /i18n/ y en ella se crearán ficheros del estilo:</p>
<ul class="simple">
<li>text.properties</li>
<li>text_en.properties</li>
</ul>
<p>El valor por defecto sin el identificativo del idima corresponderá al Español. Podemos crear diferentes para diferentes idiomas. El contenido de cada uno será similar el siguiente:</p>
<p>text.properties</p>
<p>Contenido:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_Analysis</span><span class="o">=</span><span class="n">Analisis</span>
<span class="n">_Count_Duplicates_Table</span><span class="o">=</span><span class="n">Tabla</span> <span class="n">conteo</span> <span class="n">duplicados</span>
<span class="n">_Count_features_with_duplicates_field</span><span class="o">=</span><span class="n">Contar</span> <span class="n">entidades</span> <span class="n">con</span> <span class="n">campos</span> <span class="n">duplicados</span>
</pre></div>
</div>
<p>text_en.properties</p>
<p>Contenido:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_Analysis</span><span class="o">=</span><span class="n">Analysis</span>
<span class="n">_Count_Duplicates_Table</span><span class="o">=</span><span class="n">Count</span> <span class="n">duplicates</span> <span class="n">table</span>
<span class="n">_Count_features_with_duplicates_field</span><span class="o">=</span><span class="n">Count</span> <span class="n">features</span> <span class="k">with</span> <span class="n">duplicates</span>
</pre></div>
</div>
</div>
<div class="section" id="registro">
<h2>20.3. Registro<a class="headerlink" href="#registro" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En el autorun o en la ejecución del script se deberán de agregar las traducciones creadas anteriormente. Se indicará la carpeta donde se encuentran localizadas y se ejecutaran las siguientes líneas de código:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">org.gvsig.tools</span> <span class="k">import</span> <span class="n">ToolsLocator</span>
<span class="kn">from</span> <span class="nn">java.io</span> <span class="k">import</span> <span class="n">File</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">selfRegister</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">selfRegister</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">i18nManager</span> <span class="o">=</span> <span class="n">ToolsLocator</span><span class="o">.</span><span class="n">getI18nManager</span><span class="p">()</span>
    <span class="n">i18nManager</span><span class="o">.</span><span class="n">addResourceFamily</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="n">File</span><span class="p">(</span><span class="n">gvsig</span><span class="o">.</span><span class="n">getResource</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span><span class="s2">&quot;i18n&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>Este código agregará los ficheros encontrados en la carpeta /i18n/ que comiencen por «text» al gestor de traducciones.</p>
</div>
<div class="section" id="utilizacion">
<h2>20.4. Utilización<a class="headerlink" href="#utilizacion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para hacer uso de las traducciones desde un script se necesitará acceder al manager de traducciones. Una vez hemos accedido al manager, se le podrá preguntar por la traducción de una cadena de caracteres específica. El manager devolverá el texto asociado a esa cadena en el idioma que esté gvSIG utilizando en ese momento:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">org.gvsig.tools</span> <span class="k">import</span> <span class="n">ToolsLocator</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>

  <span class="n">i18nManager</span> <span class="o">=</span> <span class="n">ToolsLocator</span><span class="o">.</span><span class="n">getI18nManager</span><span class="p">()</span>
  <span class="nb">print</span> <span class="n">i18nManager</span><span class="o">.</span><span class="n">getTranslation</span><span class="p">(</span><span class="s2">&quot;_Count_features_with_duplicates_field&quot;</span><span class="p">)</span>
  <span class="nb">print</span> <span class="n">i18nManager</span><span class="o">.</span><span class="n">getTranslation</span><span class="p">(</span><span class="s2">&quot;_Analysis&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="otros-usos">
<h2>20.5. Otros usos<a class="headerlink" href="#otros-usos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>También podemos utilizar el módulo de traducción para abrir otro tipo de ficheros según el idioma de gvSIG.
En el siguiente ejemplo buscamos un archivo de ayuda para un geoproceso. En este caso, se le pregunta a gvSIG por el idioma y por los idiomas alternativos a este (idiomas parecidos) en el caso de que no existiera el primer fichero de traducción en el idioma determinado.</p>
<p>Existiría un script con una carpeta al lado denominada /help/ con dos ficheros xml.
- countduplicates_es.xml
- countduplicates_en.xml</p>
<p>Ejemplo:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getHelpFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;countduplicates&quot;</span>
    <span class="n">extension</span> <span class="o">=</span> <span class="s2">&quot;.xml&quot;</span>
    <span class="n">locale</span> <span class="o">=</span> <span class="n">PluginsLocator</span><span class="o">.</span><span class="n">getLocaleManager</span><span class="p">()</span><span class="o">.</span><span class="n">getCurrentLocale</span><span class="p">()</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">getLanguage</span><span class="p">()</span>
    <span class="c1">#extension = &quot;.properties&quot;</span>

    <span class="n">helpPath</span> <span class="o">=</span> <span class="n">gvsig</span><span class="o">.</span><span class="n">getResource</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">helpPath</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">File</span><span class="p">(</span><span class="n">helpPath</span><span class="p">)</span>
    <span class="c1">#Alternatives</span>
    <span class="n">alternatives</span> <span class="o">=</span> <span class="n">PluginsLocator</span><span class="o">.</span><span class="n">getLocaleManager</span><span class="p">()</span><span class="o">.</span><span class="n">getLocaleAlternatives</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">alt</span> <span class="ow">in</span> <span class="n">alternatives</span><span class="p">:</span>
        <span class="n">helpPath</span> <span class="o">=</span> <span class="n">gvsig</span><span class="o">.</span><span class="n">getResource</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">alt</span><span class="o">.</span><span class="n">toLanguageTag</span><span class="p">()</span> <span class="o">+</span> <span class="n">extension</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">helpPath</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">File</span><span class="p">(</span><span class="n">helpPath</span><span class="p">)</span>
    <span class="c1"># More Alternatives</span>
    <span class="n">helpPath</span> <span class="o">=</span> <span class="n">gvsig</span><span class="o">.</span><span class="n">getResource</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">helpPath</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">File</span><span class="p">(</span><span class="n">helpPath</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/gvsig_asoc.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Tabla de Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">20. Internacionalización</a><ul>
<li><a class="reference internal" href="#traducciones">20.1. Traducciones</a></li>
<li><a class="reference internal" href="#ficheros-de-traduccion">20.2. Ficheros de traducción</a></li>
<li><a class="reference internal" href="#registro">20.3. Registro</a></li>
<li><a class="reference internal" href="#utilizacion">20.4. Utilización</a></li>
<li><a class="reference internal" href="#otros-usos">20.5. Otros usos</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="rscript.html"
                        title="capítulo anterior">19. Lenguaje R</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="explorers.html"
                        title="próximo capítulo">21. Explorers</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/scripting_devel_guide/2.4/internacionalizacion.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="links"><h3>Links</h3><ul><li><ul style="list-style-type:square">
<li><a href="https://gist.github.com/search?utf8=%E2%9C%93&q=gvsig">Repositorio de Scripts</a></li>
<li><a href="http://downloads.gvsig.org/download/web/scriptcatalog/build/html/">Catálogo de Plugins</a></li></ul></li></ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <gcse:search></gcse:search>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script>
  (function() {
    var cx = '009725233275570792772:egtqc4l6lsi';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="explorers.html" title="21. Explorers"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="rscript.html" title="19. Lenguaje R"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de gvSIG Docs - 1.0.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Documentación de Scripting en gvSIG 2.4</a> &#187;</li>

<div align="right">
<li>
<a href="http://downloads.gvsig.org/download/web/es/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_ES.png"></a></li>
<a href="http://downloads.gvsig.org/download/web/en/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_EN.png"></a></li>
<a href="http://downloads.gvsig.org/download/web/pt_br/build/html/index.html"><img src="http://downloads.gvsig.org/download/web/pt_br/build/html/_static/flag_BR.png"></a></li>
</div>

      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor 2017, gvSIG association.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>